
# 40.1s user time, 60ms system time, 37.53M rss, 43.95M vsz
# Current date: Sat Nov 25 08:20:23 2023
# Hostname: ip-192-168-0-13
# Files: /tmp/b0813-3c09eee-mysql-slow.log
# Overall: 634.36k total, 91 unique, 6.90k QPS, 3.85x concurrency ________
# Time range: 2023-11-25T08:14:39 to 2023-11-25T08:16:11
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           354s     1us   882ms   557us     2ms     6ms    66us
# Lock time          704ms       0    30ms     1us     1us    69us       0
# Rows sent        289.52k       0   7.32k    0.47    0.99   17.18       0
# Rows examine      68.15M       0  16.30k  112.65  964.41  415.15       0
# Query size        58.78M       5   1.94M   97.16  299.03   3.04k   31.70

# Profile
# Rank Query ID                     Response time Calls  R/Call V/M   Item
# ==== ============================ ============= ====== ====== ===== ====
#    1 0xDA556F9115773A1A99AA016... 59.8689 16.9% 191883 0.0003  0.00 ADMIN PREPARE
#    2 0x42EF7D7D98FBCC9723BF896... 46.7099 13.2%   6264 0.0075  0.01 SELECT records
#    3 0x9E4F40D4A4E7AB7713B549B... 37.3241 10.5%     67 0.5571  0.06 SELECT livestreams users themes icons
#    4 0x38BC86A45F31C6B1EE32467... 33.8958  9.6%  16507 0.0021  0.00 SELECT themes
#    5 0x3D83BC87F3B3A00D571FFC8... 28.9966  8.2%   4874 0.0059  0.01 SELECT records
#    6 0x84B457C910C4A79FC9EBECB... 18.3681  5.2%  20760 0.0009  0.00 SELECT icons
#    7 0x4ADE2DC90689F1C4891749A... 16.8371  4.8%  37658 0.0004  0.00 DELETE SELECT livecomments
#    8 0xFFFCA4D67EA0A788813031B... 14.4772  4.1%   3782 0.0038  0.00 COMMIT
#    9 0xFBC5564AE716EAE82F20BFB... 12.6018  3.6%  39222 0.0003  0.00 SELECT tags
#   10 0xA3401CA3ABCC04C3AB221DB...  7.3871  2.1%    146 0.0506  0.02 UPDATE reservation_slots
#   11 0x7F9C0C0BA9473953B723EE1...  7.0766  2.0%    148 0.0478  0.02 SELECT reservation_slots
#   12 0x22279D81D51006139E0C764...  6.3394  1.8%   7210 0.0009  0.00 SELECT domains domainmetadata
#   13 0xEA1E6309EEEFF9A6831AD2F...  5.6462  1.6%  16256 0.0003  0.00 SELECT users
#   14 0x8F7679D452333ED3C7D60D2...  5.1964  1.5%  19911 0.0003  0.00 ADMIN RESET STMT
#   15 0xF7144185D9A142A426A36DC...  4.4606  1.3%   9230 0.0005  0.00 SELECT livestream_tags
#   16 0xFD38427AE3D09E3883A680F...  4.2326  1.2%  14992 0.0003  0.00 SELECT livestreams livecomments
#   17 0x859BBB7E9D760686137A944...  4.1630  1.2%    251 0.0166  0.01 DELETE records
#   18 0xD2A0864774622BA36F65574...  4.0872  1.2%   1251 0.0033  0.00 INSERT themes
#   19 0xDFFCC1D78939C4D781C7C58...  3.9846  1.1%   1000 0.0040  0.00 INSERT users
#   20 0xC499D81D570D361DB61FC43...  3.7076  1.0%  14992 0.0002  0.00 SELECT livestreams reactions
# MISC 0xMISC                       28.5176  8.1% 227957 0.0001   0.0 <71 ITEMS>

# Query 1: 2.34k QPS, 0.73x concurrency, ID 0xDA556F9115773A1A99AA0165670CE848 at byte 79546222
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T08:14:49 to 2023-11-25T08:16:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         30  191883
# Exec time     16     60s    21us    33ms   312us     1ms   765us    80us
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     9   5.49M      30      30      30      30       0      30
# String:
# Databases    isupipe (190373/99%), isudns (1510/0%)
# Hosts        localhost
# Users        isucon (190373/99%), isudns (1510/0%)
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ########################################
#   1ms  ########
#  10ms  #
# 100ms
#    1s
#  10s+
administrator command: Prepare\G

# Query 2: 68.09 QPS, 0.51x concurrency, ID 0x42EF7D7D98FBCC9723BF896EBFC51D24 at byte 164732807
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T08:14:39 to 2023-11-25T08:16:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    6264
# Exec time     13     47s   717us    63ms     7ms    20ms     7ms     5ms
# Lock time      5    37ms       0    20ms     5us     1us   242us     1us
# Rows sent      0   1.90k       0       1    0.31    0.99    0.46       0
# Rows examine  12   8.42M   1.25k   1.49k   1.38k   1.46k   71.94   1.33k
# Query size     1 858.17k     129     207  140.29  158.58   10.92  136.99
# String:
# Databases    isudns
# Hosts        localhost
# Users        isudns
# Query_time distribution
#   1us
#  10us
# 100us  #
#   1ms  ################################################################
#  10ms  ########################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isudns` LIKE 'records'\G
#    SHOW CREATE TABLE `isudns`.`records`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT content,ttl,prio,type,domain_id,disabled,name,auth FROM records WHERE disabled=0 and name='h2xj0p4jvmpexo0.u.isucon.dev' and domain_id=2\G

# Query 3: 1.08 QPS, 0.60x concurrency, ID 0x9E4F40D4A4E7AB7713B549B324E1E8AB at byte 148833254
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.06
# Time range: 2023-11-25T08:15:05 to 2023-11-25T08:16:07
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      67
# Exec time     10     37s    30ms   882ms   557ms   816ms   175ms   526ms
# Lock time      0   157us     1us    31us     2us     2us     3us     1us
# Rows sent      1   3.27k      50      50      50      50       0      50
# Rows examine   1   1.05M  15.71k  16.30k  16.01k  15.96k     301  15.96k
# Query size     0  54.37k     831     831     831     831       0     831
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms  #
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livestreams'\G
#    SHOW CREATE TABLE `isupipe`.`livestreams`\G
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'users'\G
#    SHOW CREATE TABLE `isupipe`.`users`\G
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'themes'\G
#    SHOW CREATE TABLE `isupipe`.`themes`\G
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'icons'\G
#    SHOW CREATE TABLE `isupipe`.`icons`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT livestreams.id AS id,
				livestreams.title AS title,
				livestreams.description AS description,
				livestreams.playlist_url AS playlist_url,
				livestreams.thumbnail_url AS thumbnail_url,
				livestreams.start_at AS start_at,
				livestreams.end_at AS end_at,
				users.id AS "users.id",
				users.name AS "users.name",
				users.display_name AS "users.display_name",
				users.description AS "users.description",
				themes.id AS "users.themes.id",
				themes.dark_mode AS "users.themes.dark_mode",
				IFNULL(SHA2(icons.image, 256), "d9f8294e9d895f81ce62e73dc7d5dff862a4fa40bd4e0fecf53f7526a8edcac0") AS "users.icon_hash"
			FROM livestreams
			LEFT JOIN users ON users.id = livestreams.user_id
			LEFT JOIN themes ON themes.user_id = users.id
			LEFT JOIN icons ON icons.user_id = users.id
		ORDER BY id DESC LIMIT 50\G

# Query 4: 201.30 QPS, 0.41x concurrency, ID 0x38BC86A45F31C6B1EE324671506C898A at byte 141452736
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T08:14:49 to 2023-11-25T08:16:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   16507
# Exec time      9     34s   246us    28ms     2ms     7ms     2ms   972us
# Lock time      6    42ms       0     4ms     2us     1us    49us     1us
# Rows sent      5  16.12k       1       1       1       1       0       1
# Rows examine  26  17.73M    1000   1.22k   1.10k   1.20k   74.42   1.09k
# Query size     1 658.72k      38      41   40.86   40.45    0.64   40.45
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ###############################################################
#   1ms  ################################################################
#  10ms  ##
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'themes'\G
#    SHOW CREATE TABLE `isupipe`.`themes`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM themes WHERE user_id = 1065\G

# Query 5: 52.98 QPS, 0.32x concurrency, ID 0x3D83BC87F3B3A00D571FFC8104A6E50C at byte 171415911
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T08:14:39 to 2023-11-25T08:16:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    4874
# Exec time      8     29s   680us    63ms     6ms    17ms     6ms     4ms
# Lock time      3    23ms       0     4ms     4us     1us    77us     1us
# Rows sent      0   2.48k       0       1    0.52    0.99    0.50    0.99
# Rows examine   9   6.55M   1.25k   1.49k   1.38k   1.46k   72.52   1.33k
# Query size     1 637.01k     115     206  133.83  151.03   10.11  124.25
# String:
# Databases    isudns
# Hosts        localhost
# Users        isudns
# Query_time distribution
#   1us
#  10us
# 100us  ##
#   1ms  ################################################################
#  10ms  ################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isudns` LIKE 'records'\G
#    SHOW CREATE TABLE `isudns`.`records`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT content,ttl,prio,type,domain_id,disabled,name,auth FROM records WHERE disabled=0 and type='SOA' and name='0gsk24cqzai74dj0ghybpli9ng5t0.u.isucon.dev'\G

# Query 6: 253.17 QPS, 0.22x concurrency, ID 0x84B457C910C4A79FC9EBECB8B1065C66 at byte 54610111
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T08:14:49 to 2023-11-25T08:16:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   20760
# Exec time      5     18s    55us    33ms   884us     3ms     2ms   348us
# Lock time      8    58ms       0     5ms     2us     1us    65us     1us
# Rows sent      5  16.97k       0       1    0.84    0.99    0.37    0.99
# Rows examine   0  16.97k       0       1    0.84    0.99    0.37    0.99
# Query size     1 888.75k      41      44   43.84   42.48    0.26   42.48
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #########
# 100us  ################################################################
#   1ms  #########################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'icons'\G
#    SHOW CREATE TABLE `isupipe`.`icons`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT image FROM icons WHERE user_id = 1014\G

# Query 7: 617.34 QPS, 0.28x concurrency, ID 0x4ADE2DC90689F1C4891749AF54FB8D14 at byte 171630334
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T08:15:10 to 2023-11-25T08:16:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          5   37658
# Exec time      4     17s    46us    28ms   447us     2ms   896us   131us
# Lock time     15   106ms       0     9ms     2us     1us    70us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  73.56k       2       4    2.00    1.96    0.02    1.96
# Query size    20  11.84M     263     538  329.64  363.48   28.01  313.99
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ####################################################
# 100us  ################################################################
#   1ms  ##############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livecomments'\G
#    SHOW CREATE TABLE `isupipe`.`livecomments`\G
DELETE FROM livecomments
			WHERE
			id = 1108 AND
			livestream_id = 7586 AND
			(SELECT COUNT(*)
			FROM
			(SELECT 'あなたの言葉、いつもありがとうございました！' AS text) AS texts
			INNER JOIN
			(SELECT CONCAT('%', '豪胸山', '%')	AS pattern) AS patterns
			ON texts.text LIKE patterns.pattern) >= 1\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select * from  livecomments
			WHERE
			id = 1108 AND
			livestream_id = 7586 AND
			(SELECT COUNT(*)
			FROM
			(SELECT 'あなたの言葉、いつもありがとうございました！' AS text) AS texts
			INNER JOIN
			(SELECT CONCAT('%', '豪胸山', '%')	AS pattern) AS patterns
			ON texts.text LIKE patterns.pattern) >= 1\G

# Query 8: 46.12 QPS, 0.18x concurrency, ID 0xFFFCA4D67EA0A788813031B8BBC3B329 at byte 38917333
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T08:14:49 to 2023-11-25T08:16:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3782
# Exec time      4     14s    20us    50ms     4ms    11ms     4ms     4ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  22.16k       6       6       6       6       0       6
# String:
# Databases    isupipe (3530/93%), isudns (252/6%)
# Hosts        localhost
# Users        isucon (3530/93%), isudns (252/6%)
# Query_time distribution
#   1us
#  10us  ############################
# 100us  ###############
#   1ms  ################################################################
#  10ms  ########
# 100ms
#    1s
#  10s+
COMMIT\G

# Query 9: 576.79 QPS, 0.19x concurrency, ID 0xFBC5564AE716EAE82F20BFB45F6C37E7 at byte 44275883
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T08:15:03 to 2023-11-25T08:16:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          6   39222
# Exec time      3     13s    33us    38ms   321us     1ms   680us   108us
# Lock time     14   101ms       0     8ms     2us     1us    59us     1us
# Rows sent     13  38.30k       1       1       1       1       0       1
# Rows examine   0  38.30k       1       1       1       1       0       1
# Query size     2   1.20M      31      33   31.95   31.70    0.45   31.70
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ###########################################################
#   1ms  #########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'tags'\G
#    SHOW CREATE TABLE `isupipe`.`tags`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM tags WHERE id = 60\G

# Query 10: 1.80 QPS, 0.09x concurrency, ID 0xA3401CA3ABCC04C3AB221DB8AD5CBF26 at byte 104958047
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-25T08:14:49 to 2023-11-25T08:16:10
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     146
# Exec time      2      7s     5ms   139ms    51ms   100ms    31ms    48ms
# Lock time      0   128us       0     2us       0     1us       0     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   1   1.22M   8.55k   8.55k   8.55k   8.55k       0   8.55k
# Query size     0  13.97k      98      98      98      98       0      98
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ###############
#  10ms  ################################################################
# 100ms  #######
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'reservation_slots'\G
#    SHOW CREATE TABLE `isupipe`.`reservation_slots`\G
UPDATE reservation_slots SET slot = slot - 1 WHERE start_at >= 1701378000 AND end_at <= 1701439200\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  slot = slot - 1 from reservation_slots where  start_at >= 1701378000 AND end_at <= 1701439200\G

# Query 11: 1.80 QPS, 0.09x concurrency, ID 0x7F9C0C0BA9473953B723EE16C08655F1 at byte 139351406
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-25T08:14:49 to 2023-11-25T08:16:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     148
# Exec time      1      7s     5ms   136ms    48ms    95ms    30ms    46ms
# Lock time      0     2ms       0   828us    11us     1us    76us     1us
# Rows sent      0   1.33k       1      21    9.18   18.53    6.02    8.91
# Rows examine   1   1.24M   8.55k   8.55k   8.55k   8.55k       0   8.55k
# Query size     0  13.88k      96      96      96      96       0      96
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ###############
#  10ms  ################################################################
# 100ms  #####
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'reservation_slots'\G
#    SHOW CREATE TABLE `isupipe`.`reservation_slots`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM reservation_slots WHERE start_at >= 1701543600 AND end_at <= 1701565200 FOR UPDATE\G

# Query 12: 78.37 QPS, 0.07x concurrency, ID 0x22279D81D51006139E0C76405B54C261 at byte 52261513
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T08:14:39 to 2023-11-25T08:16:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    7210
# Exec time      1      6s    91us    33ms   879us     3ms     2ms   273us
# Lock time      5    42ms     1us     4ms     5us     1us    76us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     1 802.68k     114     114     114     114       0     114
# String:
# Databases    isudns
# Hosts        localhost
# Users        isudns
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  #################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isudns` LIKE 'domains'\G
#    SHOW CREATE TABLE `isudns`.`domains`\G
#    SHOW TABLE STATUS FROM `isudns` LIKE 'domainmetadata'\G
#    SHOW CREATE TABLE `isudns`.`domainmetadata`\G
# EXPLAIN /*!50100 PARTITIONS*/
select kind,content from domains, domainmetadata where domainmetadata.domain_id=domains.id and name='u.isucon.dev'\G

# Query 13: 198.24 QPS, 0.07x concurrency, ID 0xEA1E6309EEEFF9A6831AD2FB940FC23C at byte 79290342
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T08:14:49 to 2023-11-25T08:16:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   16256
# Exec time      1      6s    41us    16ms   347us     1ms   679us   119us
# Lock time      6    44ms       0     8ms     2us     1us    69us     1us
# Rows sent      5  15.88k       1       1       1       1       0       1
# Rows examine   0  15.88k       1       1       1       1       0       1
# Query size     0 553.42k      32      35   34.86   34.95    0.64   34.95
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ###############################################################
#   1ms  ##########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'users'\G
#    SHOW CREATE TABLE `isupipe`.`users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM users WHERE id = 291\G

# Query 14: 216.42 QPS, 0.06x concurrency, ID 0x8F7679D452333ED3C7D60D22131CEFD4 at byte 156992760
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T08:14:39 to 2023-11-25T08:16:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   19911
# Exec time      1      5s    10us    34ms   260us     1ms     1ms    44us
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     1 641.66k      33      33      33      33       0      33
# String:
# Databases    isudns
# Hosts        localhost
# Users        isudns
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ##################
#   1ms  ####
#  10ms  #
# 100ms
#    1s
#  10s+
administrator command: Reset stmt\G

# Query 15: 112.56 QPS, 0.05x concurrency, ID 0xF7144185D9A142A426A36DC55C1D2623 at byte 141458761
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T08:14:49 to 2023-11-25T08:16:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    9230
# Exec time      1      4s    60us    27ms   483us     2ms   906us   152us
# Lock time      2    21ms       0     4ms     2us     1us    42us     1us
# Rows sent     13  38.31k       0      11    4.25    4.96    1.43    4.96
# Rows examine   0  38.31k       0      11    4.25    4.96    1.43    4.96
# Query size     0 504.46k      53      56   55.97   54.21    0.16   54.21
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ############################
# 100us  ################################################################
#   1ms  #############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livestream_tags'\G
#    SHOW CREATE TABLE `isupipe`.`livestream_tags`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM livestream_tags WHERE livestream_id = 7554\G

# Query 16: 1.07k QPS, 0.30x concurrency, ID 0xFD38427AE3D09E3883A680F7BAF95D3A at byte 22130372
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T08:14:49 to 2023-11-25T08:15:03
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   14992
# Exec time      1      4s   258us     6ms   282us   287us    51us   273us
# Lock time      1    14ms       0    36us       0     1us       0     1us
# Rows sent      5  14.64k       1       1       1       1       0       1
# Rows examine  21  14.33M    1001    1003    1002  964.41       0  964.41
# Query size     2   1.71M     117     120  119.85  118.34    0.64  118.34
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #
#  10ms
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livestreams'\G
#    SHOW CREATE TABLE `isupipe`.`livestreams`\G
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livecomments'\G
#    SHOW CREATE TABLE `isupipe`.`livecomments`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT IFNULL(SUM(l2.tip), 0) FROM livestreams l INNER JOIN livecomments l2 ON l.id = l2.livestream_id WHERE l.id = 3224\G

# Query 17: 3.69 QPS, 0.06x concurrency, ID 0x859BBB7E9D760686137A944406874C4D at byte 146809914
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T08:15:03 to 2023-11-25T08:16:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     251
# Exec time      1      4s     2ms    76ms    17ms    40ms    12ms    14ms
# Lock time     12    87ms       0    30ms   345us     1us     2ms     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0 344.39k   1.25k   1.49k   1.37k   1.46k   74.97   1.33k
# Query size     0  21.02k      78      93   85.74   88.31    3.34   84.10
# String:
# Databases    isudns
# Hosts        localhost
# Users        isudns
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  #################################
#  10ms  ################################################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isudns` LIKE 'records'\G
#    SHOW CREATE TABLE `isudns`.`records`\G
delete from records where domain_id=2 and name='asuka281.u.isucon.dev' and type='A'\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select * from  records where domain_id=2 and name='asuka281.u.isucon.dev' and type='A'\G

# Query 18: 13.60 QPS, 0.04x concurrency, ID 0xD2A0864774622BA36F6557496405CF75 at byte 68572818
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T08:14:39 to 2023-11-25T08:16:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1251
# Exec time      1      4s    58us    12ms     3ms     4ms     2ms     4ms
# Lock time      0     1ms       0    42us     1us     1us     1us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  70.50k      55      60   57.70   56.92    1.09   56.92
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ######
# 100us  ######
#   1ms  ################################################################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'themes'\G
#    SHOW CREATE TABLE `isupipe`.`themes`\G
INSERT INTO themes (user_id, dark_mode) VALUES(1072, 1)\G

# Query 19: 125 QPS, 0.50x concurrency, ID 0xDFFCC1D78939C4D781C7C58349101F50 at byte 573359
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T08:14:39 to 2023-11-25T08:14:47
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1000
# Exec time      1      4s     2ms     9ms     4ms     5ms   630us     4ms
# Lock time      0     1ms       0     2us     1us     1us       0     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0 401.18k     192     463  410.81  420.77   16.87  400.73
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'users'\G
#    SHOW CREATE TABLE `isupipe`.`users`\G
INSERT INTO users (id, name, display_name, description, password) VALUES (646, 'hiroshiendo0', '感慨', '普段営業をしています。\nよろしくおねがいします！\n\n連絡は以下からお願いします。\n\nウェブサイト: http://hiroshiendo.example.com/\nメールアドレス: hiroshiendo@example.com\n', '$2a$04$UwZb6IFm4tgS1pLvujdaV.sK3Gq9zN2IJyIuGjqtMyuSL/dZXfqjK')\G

# Query 20: 1.07k QPS, 0.26x concurrency, ID 0xC499D81D570D361DB61FC43A94BB888A at byte 20383218
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T08:14:49 to 2023-11-25T08:15:03
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   14992
# Exec time      1      4s   223us     2ms   247us   260us    21us   236us
# Lock time      1    14ms       0    48us       0     1us       0     1us
# Rows sent      5  14.64k       1       1       1       1       0       1
# Rows examine  21  14.33M    1001    1004 1002.50  964.41       0  964.41
# Query size     2   1.44M      98     101  100.85   97.36       0   97.36
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #
#  10ms
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livestreams'\G
#    SHOW CREATE TABLE `isupipe`.`livestreams`\G
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'reactions'\G
#    SHOW CREATE TABLE `isupipe`.`reactions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) FROM livestreams l INNER JOIN reactions r ON l.id = r.livestream_id WHERE l.id = 2118\G
