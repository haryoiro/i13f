
# 31.7s user time, 40ms system time, 38.38M rss, 44.71M vsz
# Current date: Sat Nov 25 07:34:58 2023
# Hostname: ip-192-168-0-13
# Files: /tmp/b0730-cbfba38-mysql-slow.log
# Overall: 480.33k total, 94 unique, 2.70k QPS, 2.72x concurrency ________
# Time range: 2023-11-25T07:30:34 to 2023-11-25T07:33:32
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           484s     1us   851ms     1ms     3ms     7ms    69us
# Lock time          508ms       0    24ms     1us     1us    61us       0
# Rows sent        197.85k       0   7.32k    0.42    0.99   18.64       0
# Rows examine     139.16M       0  16.14k  303.78   1.26k   1.27k       0
# Query size        52.21M       5   1.94M  113.97  313.99   3.45k   31.70

# Profile
# Rank Query ID                     Response time  Calls  R/Call V/M   Ite
# ==== ============================ ============== ====== ====== ===== ===
#    1 0xF7144185D9A142A426A36DC... 116.1068 24.0%   5036 0.0231  0.01 SELECT livestream_tags
#    2 0x42EF7D7D98FBCC9723BF896...  50.0827 10.3%   6853 0.0073  0.01 SELECT records
#    3 0xDA556F9115773A1A99AA016...  47.4086  9.8% 141794 0.0003  0.00 ADMIN PREPARE
#    4 0x9E4F40D4A4E7AB7713B549B...  30.2771  6.3%     53 0.5713  0.05 SELECT livestreams users themes icons
#    5 0xF1B8EF06D6CA63B24BFF433...  27.8957  5.8%   3816 0.0073  0.01 SELECT users livestreams livecomments
#    6 0xDB74D52D39A7090F224C4DE...  26.7373  5.5%   3819 0.0070  0.01 SELECT users livestreams reactions
#    7 0x3D83BC87F3B3A00D571FFC8...  26.5923  5.5%   5123 0.0052  0.01 SELECT records
#    8 0x4ADE2DC90689F1C4891749A...  19.1031  3.9%  38645 0.0005  0.00 DELETE SELECT livecomments
#    9 0x59F1B6DD8D9FEC059E55B3B...  17.3480  3.6%    769 0.0226  0.01 SELECT reservation_slots
#   10 0x38BC86A45F31C6B1EE32467...  16.1014  3.3%   8585 0.0019  0.00 SELECT themes
#   11 0x64CC8A4E8E4B39020337559...  12.9953  2.7%    269 0.0483  0.01 SELECT ng_words
#   12 0xFFFCA4D67EA0A788813031B...   9.8765  2.0%   2476 0.0040  0.00 COMMIT
#   13 0x84B457C910C4A79FC9EBECB...   8.8677  1.8%  10730 0.0008  0.00 SELECT icons
#   14 0xFBC5564AE716EAE82F20BFB...   7.1087  1.5%  19566 0.0004  0.00 SELECT tags
#   15 0x22279D81D51006139E0C764...   6.6256  1.4%   8096 0.0008  0.00 SELECT domains domainmetadata
#   16 0x9EAD6C0CE525E3693EE27FF...   4.9544  1.0%    105 0.0472  0.01 SELECT livestreams
#   17 0x8F7679D452333ED3C7D60D2...   4.9352  1.0%  21431 0.0002  0.00 ADMIN RESET STMT
#   18 0xA3401CA3ABCC04C3AB221DB...   4.7630  1.0%     93 0.0512  0.02 UPDATE reservation_slots
#   19 0xFD38427AE3D09E3883A680F...   4.2383  0.9%  14992 0.0003  0.00 SELECT livestreams livecomments
#   20 0xD2A0864774622BA36F65574...   4.0178  0.8%   1218 0.0033  0.00 INSERT themes
# MISC 0xMISC                        38.0077  7.9% 186866 0.0002   0.0 <74 ITEMS>

# Query 1: 55.96 QPS, 1.29x concurrency, ID 0xF7144185D9A142A426A36DC55C1D2623 at byte 44956196
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T07:31:52 to 2023-11-25T07:33:22
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    5036
# Exec time     23    116s     2ms    86ms    23ms    48ms    16ms    23ms
# Lock time      2    14ms       0     2ms     2us     1us    40us     1us
# Rows sent      9  19.11k       0      11    3.89    4.96    1.61    4.96
# Rows examine  38  53.53M  10.71k  11.09k  10.88k  10.80k  193.50  10.80k
# Query size     0 275.17k      53      56   55.95   54.21    0.19   54.21
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  #########################
#  10ms  ################################################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livestream_tags'\G
#    SHOW CREATE TABLE `isupipe`.`livestream_tags`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM livestream_tags WHERE livestream_id = 4893\G

# Query 2: 68.53 QPS, 0.50x concurrency, ID 0x42EF7D7D98FBCC9723BF896EBFC51D24 at byte 43468477
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T07:31:42 to 2023-11-25T07:33:22
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    6853
# Exec time     10     50s   724us    53ms     7ms    19ms     6ms     6ms
# Lock time      4    24ms       0     3ms     3us     1us    53us     1us
# Rows sent      0   1.54k       0       1    0.23    0.99    0.42       0
# Rows examine   6   9.12M   1.25k   1.46k   1.36k   1.39k   56.35   1.33k
# Query size     1 945.11k     129     219  141.22  158.58   11.68  136.99
# String:
# Databases    isudns
# Hosts        localhost
# Users        isudns
# Query_time distribution
#   1us
#  10us
# 100us  #
#   1ms  ################################################################
#  10ms  ##########################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isudns` LIKE 'records'\G
#    SHOW CREATE TABLE `isudns`.`records`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT content,ttl,prio,type,domain_id,disabled,name,auth FROM records WHERE disabled=0 and name='*.u.isucon.dev' and domain_id=2\G

# Query 3: 1.58k QPS, 0.53x concurrency, ID 0xDA556F9115773A1A99AA0165670CE848 at byte 143806464
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T07:31:52 to 2023-11-25T07:33:22
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         29  141794
# Exec time      9     47s    24us    37ms   334us     1ms   868us    80us
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     7   4.06M      30      30      30      30       0      30
# String:
# Databases    isupipe (140482/99%), isudns (1312/0%)
# Hosts        localhost
# Users        isucon (140482/99%), isudns (1312/0%)
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ##########################################
#   1ms  ########
#  10ms  #
# 100ms
#    1s
#  10s+
administrator command: Prepare\G

# Query 4: 0.82 QPS, 0.47x concurrency, ID 0x9E4F40D4A4E7AB7713B549B324E1E8AB at byte 112522305
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.05
# Time range: 2023-11-25T07:32:16 to 2023-11-25T07:33:21
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      53
# Exec time      6     30s    30ms   851ms   571ms   777ms   170ms   580ms
# Lock time      0   107us     1us     3us     2us     2us       0     1us
# Rows sent      1   2.59k      50      50      50      50       0      50
# Rows examine   0 844.01k  15.71k  16.14k  15.92k  15.96k  220.50  15.20k
# Query size     0  43.01k     831     831     831     831       0     831
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms  ##
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livestreams'\G
#    SHOW CREATE TABLE `isupipe`.`livestreams`\G
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'users'\G
#    SHOW CREATE TABLE `isupipe`.`users`\G
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'themes'\G
#    SHOW CREATE TABLE `isupipe`.`themes`\G
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'icons'\G
#    SHOW CREATE TABLE `isupipe`.`icons`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT livestreams.id AS id,
				livestreams.title AS title,
				livestreams.description AS description,
				livestreams.playlist_url AS playlist_url,
				livestreams.thumbnail_url AS thumbnail_url,
				livestreams.start_at AS start_at,
				livestreams.end_at AS end_at,
				users.id AS "users.id",
				users.name AS "users.name",
				users.display_name AS "users.display_name",
				users.description AS "users.description",
				themes.id AS "users.themes.id",
				themes.dark_mode AS "users.themes.dark_mode",
				IFNULL(SHA2(icons.image, 256), "d9f8294e9d895f81ce62e73dc7d5dff862a4fa40bd4e0fecf53f7526a8edcac0") AS "users.icon_hash"
			FROM livestreams
			LEFT JOIN users ON users.id = livestreams.user_id
			LEFT JOIN themes ON themes.user_id = users.id
			LEFT JOIN icons ON icons.user_id = users.id
		ORDER BY id DESC LIMIT 50\G

# Query 5: 42.40 QPS, 0.31x concurrency, ID 0xF1B8EF06D6CA63B24BFF433E06CCEB22 at byte 152394797
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T07:31:52 to 2023-11-25T07:33:22
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3816
# Exec time      5     28s     1ms    86ms     7ms    26ms     9ms     1ms
# Lock time      1     9ms       0     2ms     2us     1us    32us     1us
# Rows sent      1   3.73k       1       1       1       1       0       1
# Rows examine   5   7.67M   1.96k   2.30k   2.06k   2.27k  122.15   1.96k
# Query size     1 614.25k     163     166  164.83  158.58       0  158.58
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ##########################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'users'\G
#    SHOW CREATE TABLE `isupipe`.`users`\G
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livestreams'\G
#    SHOW CREATE TABLE `isupipe`.`livestreams`\G
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livecomments'\G
#    SHOW CREATE TABLE `isupipe`.`livecomments`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT IFNULL(SUM(l2.tip), 0) FROM users u
		INNER JOIN livestreams l ON l.user_id = u.id	
		INNER JOIN livecomments l2 ON l2.livestream_id = l.id
		WHERE u.id = 410\G

# Query 6: 42.43 QPS, 0.30x concurrency, ID 0xDB74D52D39A7090F224C4DEEAF3028C9 at byte 67847747
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T07:31:52 to 2023-11-25T07:33:22
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3819
# Exec time      5     27s     1ms    55ms     7ms    26ms     9ms     1ms
# Lock time      1     7ms       0     1ms     1us     1us    20us     1us
# Rows sent      1   3.73k       1       1       1       1       0       1
# Rows examine   5   7.66M   1.96k   2.27k   2.05k   2.27k  122.18   1.96k
# Query size     1 540.15k     143     146  144.83  143.84    0.81  143.84
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  #########################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'users'\G
#    SHOW CREATE TABLE `isupipe`.`users`\G
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livestreams'\G
#    SHOW CREATE TABLE `isupipe`.`livestreams`\G
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'reactions'\G
#    SHOW CREATE TABLE `isupipe`.`reactions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) FROM users u
		INNER JOIN livestreams l ON l.user_id = u.id
		INNER JOIN reactions r ON r.livestream_id = l.id
		WHERE u.id = 6\G

# Query 7: 46.57 QPS, 0.24x concurrency, ID 0x3D83BC87F3B3A00D571FFC8104A6E50C at byte 121830590
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T07:31:42 to 2023-11-25T07:33:32
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    5123
# Exec time      5     27s   679us    62ms     5ms    16ms     5ms     2ms
# Lock time      2    12ms       0     2ms     2us     1us    28us     1us
# Rows sent      1   2.58k       0       1    0.51    0.99    0.50    0.99
# Rows examine   4   6.82M   1.25k   1.46k   1.36k   1.39k   57.41   1.33k
# Query size     1 674.23k     115     218  134.77  151.03   10.92  124.25
# String:
# Databases    isudns
# Hosts        localhost
# Users        isudns
# Query_time distribution
#   1us
#  10us
# 100us  #
#   1ms  ################################################################
#  10ms  ##############
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isudns` LIKE 'records'\G
#    SHOW CREATE TABLE `isudns`.`records`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT content,ttl,prio,type,domain_id,disabled,name,auth FROM records WHERE disabled=0 and type='SOA' and name='pipe.u.isucon.dev'\G

# Query 8: 633.52 QPS, 0.31x concurrency, ID 0x4ADE2DC90689F1C4891749AF54FB8D14 at byte 136664633
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T07:32:21 to 2023-11-25T07:33:22
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          8   38645
# Exec time      3     19s    50us    32ms   494us     2ms   935us   185us
# Lock time     20   103ms       0     8ms     2us     1us    58us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  75.49k       2       4    2.00    1.96    0.02    1.96
# Query size    23  12.12M     263     454  328.79  363.48   25.48  313.99
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #########################
# 100us  ################################################################
#   1ms  ###########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livecomments'\G
#    SHOW CREATE TABLE `isupipe`.`livecomments`\G
DELETE FROM livecomments
			WHERE
			id = 568 AND
			livestream_id = 7525 AND
			(SELECT COUNT(*)
			FROM
			(SELECT 'こんな時間まで、ありがとう。寝る前の癒し。' AS text) AS texts
			INNER JOIN
			(SELECT CONCAT('%', '天鱸', '%')	AS pattern) AS patterns
			ON texts.text LIKE patterns.pattern) >= 1\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select * from  livecomments
			WHERE
			id = 568 AND
			livestream_id = 7525 AND
			(SELECT COUNT(*)
			FROM
			(SELECT 'こんな時間まで、ありがとう。寝る前の癒し。' AS text) AS texts
			INNER JOIN
			(SELECT CONCAT('%', '天鱸', '%')	AS pattern) AS patterns
			ON texts.text LIKE patterns.pattern) >= 1\G

# Query 9: 8.54 QPS, 0.19x concurrency, ID 0x59F1B6DD8D9FEC059E55B3BFD624E8C3 at byte 135138424
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T07:31:52 to 2023-11-25T07:33:22
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     769
# Exec time      3     17s     2ms    78ms    23ms    44ms    13ms    21ms
# Lock time      0     1ms       0   197us     1us     1us     7us     1us
# Rows sent      0     769       1       1       1       1       0       1
# Rows examine   4   6.42M   8.55k   8.55k   8.55k   8.55k       0   8.55k
# Query size     0  64.58k      86      86      86      86       0      86
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  #############
#  10ms  ################################################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'reservation_slots'\G
#    SHOW CREATE TABLE `isupipe`.`reservation_slots`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT slot FROM reservation_slots WHERE start_at = 1701338400 AND end_at = 1701342000\G

# Query 10: 95.39 QPS, 0.18x concurrency, ID 0x38BC86A45F31C6B1EE324671506C898A at byte 96460160
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T07:31:52 to 2023-11-25T07:33:22
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    8585
# Exec time      3     16s   243us    36ms     2ms     6ms     2ms   690us
# Lock time      2    13ms       0     2ms     1us     1us    21us     1us
# Rows sent      4   8.38k       1       1       1       1       0       1
# Rows examine   6   9.04M    1000   1.19k   1.08k   1.14k   69.73   1.04k
# Query size     0 341.99k      38      41   40.79   40.45    0.76   40.45
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ################################################
#  10ms  ##
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'themes'\G
#    SHOW CREATE TABLE `isupipe`.`themes`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM themes WHERE user_id = 1014\G

# Query 11: 3.36 QPS, 0.16x concurrency, ID 0x64CC8A4E8E4B390203375597CE4D611F at byte 62180275
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T07:32:02 to 2023-11-25T07:33:22
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     269
# Exec time      2     13s     4ms   115ms    48ms    78ms    20ms    48ms
# Lock time      0     2ms       0   631us     5us     1us    46us     1us
# Rows sent      0      99       0       2    0.37    0.99    0.57       0
# Rows examine   2   3.68M  14.00k  14.03k  14.01k  13.78k       0  13.78k
# Query size     0  26.00k      97      99   98.99   97.36    0.40   97.36
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ###
#  10ms  ################################################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'ng_words'\G
#    SHOW CREATE TABLE `isupipe`.`ng_words`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT id, user_id, livestream_id, word FROM ng_words WHERE user_id = 1014 AND livestream_id = 7525\G

# Query 12: 27.51 QPS, 0.11x concurrency, ID 0xFFFCA4D67EA0A788813031B8BBC3B329 at byte 136643017
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T07:31:52 to 2023-11-25T07:33:22
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    2476
# Exec time      2     10s    22us    50ms     4ms    11ms     4ms     4ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  14.51k       6       6       6       6       0       6
# String:
# Databases    isupipe (2257/91%), isudns (219/8%)
# Hosts        localhost
# Users        isucon (2257/91%), isudns (219/8%)
# Query_time distribution
#   1us
#  10us  ##########################
# 100us  ############
#   1ms  ################################################################
#  10ms  ########
# 100ms
#    1s
#  10s+
commit\G

# Query 13: 119.22 QPS, 0.10x concurrency, ID 0x84B457C910C4A79FC9EBECB8B1065C66 at byte 100839747
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T07:31:52 to 2023-11-25T07:33:22
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   10730
# Exec time      1      9s    61us    29ms   826us     3ms     1ms   247us
# Lock time      8    41ms       0     8ms     3us     1us   111us     1us
# Rows sent      4   7.96k       0       1    0.76    0.99    0.42    0.99
# Rows examine   0   7.96k       0       1    0.76    0.99    0.42    0.99
# Query size     0 458.67k      41      44   43.77   42.48    0.30   42.48
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################
# 100us  ################################################################
#   1ms  ########################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'icons'\G
#    SHOW CREATE TABLE `isupipe`.`icons`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT image FROM icons WHERE user_id = 1014\G

# Query 14: 279.51 QPS, 0.10x concurrency, ID 0xFBC5564AE716EAE82F20BFB45F6C37E7 at byte 152076837
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T07:32:12 to 2023-11-25T07:33:22
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   19566
# Exec time      1      7s    37us    35ms   363us     1ms     1ms    98us
# Lock time      9    51ms       0     4ms     2us     1us    44us     1us
# Rows sent      9  19.11k       1       1       1       1       0       1
# Rows examine   0  19.11k       1       1       1       1       0       1
# Query size     1 609.24k      31      33   31.89   31.70    0.52   31.70
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ######################################################
#   1ms  #########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'tags'\G
#    SHOW CREATE TABLE `isupipe`.`tags`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM tags WHERE id = 33\G

# Query 15: 80.96 QPS, 0.07x concurrency, ID 0x22279D81D51006139E0C76405B54C261 at byte 126081892
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T07:31:42 to 2023-11-25T07:33:22
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    8096
# Exec time      1      7s    84us    36ms   818us     3ms     2ms   260us
# Lock time      7    37ms     1us     2ms     4us     1us    48us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     1 901.31k     114     114     114     114       0     114
# String:
# Databases    isudns
# Hosts        localhost
# Users        isudns
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isudns` LIKE 'domains'\G
#    SHOW CREATE TABLE `isudns`.`domains`\G
#    SHOW TABLE STATUS FROM `isudns` LIKE 'domainmetadata'\G
#    SHOW CREATE TABLE `isudns`.`domainmetadata`\G
# EXPLAIN /*!50100 PARTITIONS*/
select kind,content from domains, domainmetadata where domainmetadata.domain_id=domains.id and name='u.isucon.dev'\G

# Query 16: 1.24 QPS, 0.06x concurrency, ID 0x9EAD6C0CE525E3693EE27FFC9AAF05A3 at byte 59996234
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T07:31:55 to 2023-11-25T07:33:20
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     105
# Exec time      1      5s     4ms   110ms    47ms    91ms    24ms    48ms
# Lock time      0   113us       0     2us     1us     1us       0     1us
# Rows sent      0     149       0      21    1.42    6.98    3.65       0
# Rows examine   0 773.38k   7.32k   7.41k   7.37k   7.31k       0   7.31k
# Query size     0   4.71k      43      46   45.90   44.60    0.41   44.60
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ######
#  10ms  ################################################################
# 100ms  ##
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livestreams'\G
#    SHOW CREATE TABLE `isupipe`.`livestreams`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM livestreams WHERE user_id = 1035\G

# Query 17: 194.83 QPS, 0.04x concurrency, ID 0x8F7679D452333ED3C7D60D22131CEFD4 at byte 86967877
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T07:31:42 to 2023-11-25T07:33:32
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   21431
# Exec time      1      5s    10us    37ms   230us   881us   845us    44us
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     1 690.65k      33      33      33      33       0      33
# String:
# Databases    isudns
# Hosts        localhost
# Users        isudns
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ##################
#   1ms  ####
#  10ms  #
# 100ms
#    1s
#  10s+
administrator command: Reset stmt\G

# Query 18: 1.03 QPS, 0.05x concurrency, ID 0xA3401CA3ABCC04C3AB221DB8AD5CBF26 at byte 152429160
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-25T07:31:52 to 2023-11-25T07:33:22
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      93
# Exec time      0      5s     5ms   150ms    51ms   100ms    35ms    56ms
# Lock time      0     3ms       0     3ms    28us     1us   253us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0 795.50k   8.55k   8.55k   8.55k   8.55k       0   8.55k
# Query size     0   8.90k      98      98      98      98       0      98
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ############################
#  10ms  ################################################################
# 100ms  #########
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'reservation_slots'\G
#    SHOW CREATE TABLE `isupipe`.`reservation_slots`\G
UPDATE reservation_slots SET slot = slot - 1 WHERE start_at >= 1701410400 AND end_at <= 1701475200\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  slot = slot - 1 from reservation_slots where  start_at >= 1701410400 AND end_at <= 1701475200\G

# Query 19: 881.88 QPS, 0.25x concurrency, ID 0xFD38427AE3D09E3883A680F7BAF95D3A at byte 13585808
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T07:31:55 to 2023-11-25T07:32:12
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   14992
# Exec time      0      4s   261us     4ms   282us   287us    37us   273us
# Lock time      2    14ms       0    25us       0     1us       0     1us
# Rows sent      7  14.64k       1       1       1       1       0       1
# Rows examine  10  14.33M    1001    1003    1002  964.41       0  964.41
# Query size     3   1.71M     117     120  119.85  118.34    0.64  118.34
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #
#  10ms
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livestreams'\G
#    SHOW CREATE TABLE `isupipe`.`livestreams`\G
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livecomments'\G
#    SHOW CREATE TABLE `isupipe`.`livecomments`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT IFNULL(SUM(l2.tip), 0) FROM livestreams l INNER JOIN livecomments l2 ON l.id = l2.livestream_id WHERE l.id = 4301\G

# Query 20: 12.18 QPS, 0.04x concurrency, ID 0xD2A0864774622BA36F6557496405CF75 at byte 40039293
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T07:31:42 to 2023-11-25T07:33:22
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1218
# Exec time      0      4s    59us    12ms     3ms     4ms     1ms     4ms
# Lock time      0     3ms       0     1ms     2us     1us    39us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  68.72k      55      60   57.78   56.92    1.05   56.92
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #####
# 100us  #####
#   1ms  ################################################################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'themes'\G
#    SHOW CREATE TABLE `isupipe`.`themes`\G
INSERT INTO themes (user_id, dark_mode) VALUES(1013, 1)\G
