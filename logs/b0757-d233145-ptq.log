
# 40.5s user time, 100ms system time, 37.93M rss, 44.49M vsz
# Current date: Sat Nov 25 08:00:24 2023
# Hostname: ip-192-168-0-13
# Files: /tmp/b0757-d233145-mysql-slow.log
# Overall: 637.16k total, 91 unique, 6.78k QPS, 3.78x concurrency ________
# Time range: 2023-11-25T07:57:37 to 2023-11-25T07:59:11
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           355s     1us   820ms   557us     2ms     5ms    66us
# Lock time          733ms       0    34ms     1us     1us    74us       0
# Rows sent        279.67k       0   7.32k    0.45    0.99   17.45       0
# Rows examine      74.44M       0  16.20k  122.50  964.41  507.51       0
# Query size        59.47M       5   1.94M   97.87  299.03   3.02k   31.70

# Profile
# Rank Query ID                     Response time Calls  R/Call V/M   Item
# ==== ============================ ============= ====== ====== ===== ====
#    1 0xDA556F9115773A1A99AA016... 61.4987 17.3% 192742 0.0003  0.00 ADMIN PREPARE
#    2 0x42EF7D7D98FBCC9723BF896... 47.8626 13.5%   6487 0.0074  0.01 SELECT records
#    3 0x38BC86A45F31C6B1EE32467... 32.8066  9.2%  16032 0.0020  0.00 SELECT themes
#    4 0x3D83BC87F3B3A00D571FFC8... 28.5791  8.0%   4965 0.0058  0.01 SELECT records
#    5 0x9E4F40D4A4E7AB7713B549B... 23.4462  6.6%     48 0.4885  0.05 SELECT livestreams users themes icons
#    6 0x4ADE2DC90689F1C4891749A... 19.4763  5.5%  43295 0.0004  0.00 DELETE SELECT livecomments
#    7 0x59F1B6DD8D9FEC059E55B3B... 17.9814  5.1%    900 0.0200  0.01 SELECT reservation_slots
#    8 0x84B457C910C4A79FC9EBECB... 17.8229  5.0%  20178 0.0009  0.00 SELECT icons
#    9 0xFFFCA4D67EA0A788813031B... 13.5426  3.8%   3358 0.0040  0.01 COMMIT
#   10 0xFBC5564AE716EAE82F20BFB... 12.3308  3.5%  37818 0.0003  0.00 SELECT tags
#   11 0x22279D81D51006139E0C764...  6.6559  1.9%   7546 0.0009  0.00 SELECT domains domainmetadata
#   12 0xEA1E6309EEEFF9A6831AD2F...  5.6623  1.6%  15788 0.0004  0.00 SELECT users
#   13 0x8F7679D452333ED3C7D60D2...  5.4889  1.5%  20604 0.0003  0.00 ADMIN RESET STMT
#   14 0xF7144185D9A142A426A36DC...  4.7110  1.3%   8971 0.0005  0.00 SELECT livestream_tags
#   15 0xA3401CA3ABCC04C3AB221DB...  4.7023  1.3%    103 0.0457  0.02 UPDATE reservation_slots
#   16 0xD2A0864774622BA36F65574...  4.4153  1.2%   1245 0.0035  0.00 INSERT themes
#   17 0xDFFCC1D78939C4D781C7C58...  4.3424  1.2%   1000 0.0043  0.00 INSERT users
#   18 0xFD38427AE3D09E3883A680F...  4.2336  1.2%  14992 0.0003  0.00 SELECT livestreams livecomments
#   19 0x859BBB7E9D760686137A944...  4.0705  1.1%    245 0.0166  0.01 DELETE records
#   20 0x7F9C0C0BA9473953B723EE1...  4.0512  1.1%    105 0.0386  0.02 SELECT reservation_slots
# MISC 0xMISC                       31.6260  8.9% 240735 0.0001   0.0 <71 ITEMS>

# Query 1: 2.32k QPS, 0.74x concurrency, ID 0xDA556F9115773A1A99AA0165670CE848 at byte 91613402
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T07:57:48 to 2023-11-25T07:59:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         30  192742
# Exec time     17     61s    22us    28ms   319us     1ms   771us    84us
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     9   5.51M      30      30      30      30       0      30
# String:
# Databases    isupipe (191268/99%), isudns (1474/0%)
# Hosts        localhost
# Users        isucon (191268/99%), isudns (1474/0%)
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ###########################################
#   1ms  ########
#  10ms  #
# 100ms
#    1s
#  10s+
administrator command: Prepare\G

# Query 2: 69.01 QPS, 0.51x concurrency, ID 0x42EF7D7D98FBCC9723BF896EBFC51D24 at byte 134903804
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T07:57:37 to 2023-11-25T07:59:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    6487
# Exec time     13     48s   724us    55ms     7ms    20ms     6ms     5ms
# Lock time      3    28ms       0     3ms     4us     1us    64us     1us
# Rows sent      0   1.75k       0       1    0.28    0.99    0.44       0
# Rows examine  11   8.72M   1.25k   1.49k   1.38k   1.46k   70.38   1.33k
# Query size     1 891.04k     129     218  140.65  158.58   11.26  136.99
# String:
# Databases    isudns
# Hosts        localhost
# Users        isudns
# Query_time distribution
#   1us
#  10us
# 100us  #
#   1ms  ################################################################
#  10ms  #########################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isudns` LIKE 'records'\G
#    SHOW CREATE TABLE `isudns`.`records`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT content,ttl,prio,type,domain_id,disabled,name,auth FROM records WHERE disabled=0 and name='*.u.isucon.dev' and domain_id=2\G

# Query 3: 193.16 QPS, 0.40x concurrency, ID 0x38BC86A45F31C6B1EE324671506C898A at byte 91614403
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T07:57:48 to 2023-11-25T07:59:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   16032
# Exec time      9     33s   244us    29ms     2ms     7ms     2ms     1ms
# Lock time      6    45ms       0     7ms     2us     1us    67us     1us
# Rows sent      5  15.66k       1       1       1       1       0       1
# Rows examine  23  17.22M    1000   1.21k   1.10k   1.20k   71.70   1.09k
# Query size     1 639.68k      38      41   40.86   40.45    0.65   40.45
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ###############################################################
#   1ms  ################################################################
#  10ms  ##
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'themes'\G
#    SHOW CREATE TABLE `isupipe`.`themes`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM themes WHERE user_id = 1029\G

# Query 4: 52.82 QPS, 0.30x concurrency, ID 0x3D83BC87F3B3A00D571FFC8104A6E50C at byte 58806762
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T07:57:37 to 2023-11-25T07:59:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    4965
# Exec time      8     29s   677us    63ms     6ms    17ms     6ms     3ms
# Lock time      2    21ms       0     8ms     4us     1us   111us     1us
# Rows sent      0   2.52k       0       1    0.52    0.99    0.50    0.99
# Rows examine   8   6.67M   1.25k   1.49k   1.37k   1.46k   70.95   1.33k
# Query size     1 650.70k     115     217  134.20  151.03   10.52  124.25
# String:
# Databases    isudns
# Hosts        localhost
# Users        isudns
# Query_time distribution
#   1us
#  10us
# 100us  #
#   1ms  ################################################################
#  10ms  ################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isudns` LIKE 'records'\G
#    SHOW CREATE TABLE `isudns`.`records`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT content,ttl,prio,type,domain_id,disabled,name,auth FROM records WHERE disabled=0 and type='SOA' and name='bde2yy41wsk6pli4i1s0uqu2140.u.isucon.dev'\G

# Query 5: 0.74 QPS, 0.36x concurrency, ID 0x9E4F40D4A4E7AB7713B549B324E1E8AB at byte 42459840
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.05
# Time range: 2023-11-25T07:58:05 to 2023-11-25T07:59:10
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      48
# Exec time      6     23s    24ms   820ms   488ms   672ms   162ms   501ms
# Lock time      0   119us     1us    20us     2us     2us     2us     1us
# Rows sent      0   2.34k      50      50      50      50       0      50
# Rows examine   1 763.87k  15.71k  16.20k  15.91k  15.96k     251  15.20k
# Query size     0  38.95k     831     831     831     831       0     831
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms  ##
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livestreams'\G
#    SHOW CREATE TABLE `isupipe`.`livestreams`\G
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'users'\G
#    SHOW CREATE TABLE `isupipe`.`users`\G
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'themes'\G
#    SHOW CREATE TABLE `isupipe`.`themes`\G
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'icons'\G
#    SHOW CREATE TABLE `isupipe`.`icons`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT livestreams.id AS id,
				livestreams.title AS title,
				livestreams.description AS description,
				livestreams.playlist_url AS playlist_url,
				livestreams.thumbnail_url AS thumbnail_url,
				livestreams.start_at AS start_at,
				livestreams.end_at AS end_at,
				users.id AS "users.id",
				users.name AS "users.name",
				users.display_name AS "users.display_name",
				users.description AS "users.description",
				themes.id AS "users.themes.id",
				themes.dark_mode AS "users.themes.dark_mode",
				IFNULL(SHA2(icons.image, 256), "d9f8294e9d895f81ce62e73dc7d5dff862a4fa40bd4e0fecf53f7526a8edcac0") AS "users.icon_hash"
			FROM livestreams
			LEFT JOIN users ON users.id = livestreams.user_id
			LEFT JOIN themes ON themes.user_id = users.id
			LEFT JOIN icons ON icons.user_id = users.id
		ORDER BY id DESC LIMIT 50\G

# Query 6: 709.75 QPS, 0.32x concurrency, ID 0x4ADE2DC90689F1C4891749AF54FB8D14 at byte 96156281
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T07:58:10 to 2023-11-25T07:59:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          6   43295
# Exec time      5     19s    45us    27ms   449us     2ms   900us   131us
# Lock time     15   112ms       0     5ms     2us     1us    46us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  84.57k       2       4    2.00    1.96    0.02    1.96
# Query size    22  13.60M     263     529  329.41  363.48   27.59  313.99
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ####################################################
# 100us  ################################################################
#   1ms  ##############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livecomments'\G
#    SHOW CREATE TABLE `isupipe`.`livecomments`\G
DELETE FROM livecomments
			WHERE
			id = 831 AND
			livestream_id = 7524 AND
			(SELECT COUNT(*)
			FROM
			(SELECT 'ライブ感があって素敵！' AS text) AS texts
			INNER JOIN
			(SELECT CONCAT('%', '光電粒子', '%')	AS pattern) AS patterns
			ON texts.text LIKE patterns.pattern) >= 1\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select * from  livecomments
			WHERE
			id = 831 AND
			livestream_id = 7524 AND
			(SELECT COUNT(*)
			FROM
			(SELECT 'ライブ感があって素敵！' AS text) AS texts
			INNER JOIN
			(SELECT CONCAT('%', '光電粒子', '%')	AS pattern) AS patterns
			ON texts.text LIKE patterns.pattern) >= 1\G

# Query 7: 10.84 QPS, 0.22x concurrency, ID 0x59F1B6DD8D9FEC059E55B3BFD624E8C3 at byte 44006453
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T07:57:48 to 2023-11-25T07:59:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     900
# Exec time      5     18s     2ms    73ms    20ms    44ms    13ms    17ms
# Lock time      0     4ms       0     2ms     4us     1us    76us     1us
# Rows sent      0     900       1       1       1       1       0       1
# Rows examine  10   7.52M   8.55k   8.55k   8.55k   8.55k       0   8.55k
# Query size     0  75.59k      86      86      86      86       0      86
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  #####################
#  10ms  ################################################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'reservation_slots'\G
#    SHOW CREATE TABLE `isupipe`.`reservation_slots`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT slot FROM reservation_slots WHERE start_at = 1700953200 AND end_at = 1700956800\G

# Query 8: 243.11 QPS, 0.21x concurrency, ID 0x84B457C910C4A79FC9EBECB8B1065C66 at byte 176963201
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T07:57:48 to 2023-11-25T07:59:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   20178
# Exec time      5     18s    57us    42ms   883us     3ms     2ms   332us
# Lock time      6    47ms       0     2ms     2us     1us    31us     1us
# Rows sent      5  16.25k       0       1    0.82    0.99    0.38    0.99
# Rows examine   0  16.25k       0       1    0.82    0.99    0.38    0.99
# Query size     1 863.60k      41      44   43.83   42.48    0.26   42.48
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #########
# 100us  ################################################################
#   1ms  #########################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'icons'\G
#    SHOW CREATE TABLE `isupipe`.`icons`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT image FROM icons WHERE user_id = 1022\G

# Query 9: 40.46 QPS, 0.16x concurrency, ID 0xFFFCA4D67EA0A788813031B8BBC3B329 at byte 45862261
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T07:57:48 to 2023-11-25T07:59:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3358
# Exec time      3     14s    21us    80ms     4ms    12ms     5ms     4ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  19.68k       6       6       6       6       0       6
# String:
# Databases    isupipe (3112/92%), isudns (246/7%)
# Hosts        localhost
# Users        isucon (3112/92%), isudns (246/7%)
# Query_time distribution
#   1us
#  10us  #############################
# 100us  #############
#   1ms  ################################################################
#  10ms  ##########
# 100ms
#    1s
#  10s+
COMMIT\G

# Query 10: 556.15 QPS, 0.18x concurrency, ID 0xFBC5564AE716EAE82F20BFB45F6C37E7 at byte 79990698
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T07:58:03 to 2023-11-25T07:59:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          5   37818
# Exec time      3     12s    35us    18ms   326us     1ms   672us   103us
# Lock time      9    71ms       0     2ms     1us     1us    24us     1us
# Rows sent     13  36.93k       1       1       1       1       0       1
# Rows examine   0  36.93k       1       1       1       1       0       1
# Query size     1   1.15M      31      33   31.96   31.70    0.39   31.70
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ###########################################################
#   1ms  #########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'tags'\G
#    SHOW CREATE TABLE `isupipe`.`tags`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM tags WHERE id = 69\G

# Query 11: 80.28 QPS, 0.07x concurrency, ID 0x22279D81D51006139E0C76405B54C261 at byte 51764544
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T07:57:37 to 2023-11-25T07:59:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    7546
# Exec time      1      7s    84us    27ms   882us     3ms     2ms   287us
# Lock time      7    58ms       0     6ms     7us     1us   115us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     1 840.08k     114     114     114     114       0     114
# String:
# Databases    isudns
# Hosts        localhost
# Users        isudns
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  #################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isudns` LIKE 'domains'\G
#    SHOW CREATE TABLE `isudns`.`domains`\G
#    SHOW TABLE STATUS FROM `isudns` LIKE 'domainmetadata'\G
#    SHOW CREATE TABLE `isudns`.`domainmetadata`\G
# EXPLAIN /*!50100 PARTITIONS*/
select kind,content from domains, domainmetadata where domainmetadata.domain_id=domains.id and name='u.isucon.dev'\G

# Query 12: 190.22 QPS, 0.07x concurrency, ID 0xEA1E6309EEEFF9A6831AD2FB940FC23C at byte 190379208
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T07:57:48 to 2023-11-25T07:59:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   15788
# Exec time      1      6s    42us    18ms   358us     1ms   761us   113us
# Lock time      5    38ms       0     2ms     2us     1us    32us     1us
# Rows sent      5  15.42k       1       1       1       1       0       1
# Rows examine   0  15.42k       1       1       1       1       0       1
# Query size     0 537.40k      32      35   34.86   34.95    0.64   34.95
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ############################################################
#   1ms  ##########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'users'\G
#    SHOW CREATE TABLE `isupipe`.`users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM users WHERE id = 1012\G

# Query 13: 219.19 QPS, 0.06x concurrency, ID 0x8F7679D452333ED3C7D60D22131CEFD4 at byte 117025134
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T07:57:37 to 2023-11-25T07:59:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   20604
# Exec time      1      5s    10us    24ms   266us     1ms   972us    44us
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     1 664.00k      33      33      33      33       0      33
# String:
# Databases    isudns
# Hosts        localhost
# Users        isudns
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ###################
#   1ms  ####
#  10ms  #
# 100ms
#    1s
#  10s+
administrator command: Reset stmt\G

# Query 14: 108.08 QPS, 0.06x concurrency, ID 0xF7144185D9A142A426A36DC55C1D2623 at byte 89184246
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T07:57:48 to 2023-11-25T07:59:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    8971
# Exec time      1      5s    66us    20ms   525us     2ms   989us   159us
# Lock time      3    26ms       0     4ms     2us     1us    56us     1us
# Rows sent     13  36.94k       0      11    4.22    4.96    1.45    4.96
# Rows examine   0  36.94k       0      11    4.22    4.96    1.45    4.96
# Query size     0 490.32k      53      56   55.97   54.21    0.13   54.21
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #############
# 100us  ################################################################
#   1ms  ############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livestream_tags'\G
#    SHOW CREATE TABLE `isupipe`.`livestream_tags`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM livestream_tags WHERE livestream_id = 7526\G

# Query 15: 1.27 QPS, 0.06x concurrency, ID 0xA3401CA3ABCC04C3AB221DB8AD5CBF26 at byte 59204018
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-25T07:57:48 to 2023-11-25T07:59:09
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     103
# Exec time      1      5s     5ms   140ms    46ms   100ms    33ms    42ms
# Lock time      0   215us       0    88us     2us     1us     8us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   1 881.03k   8.55k   8.55k   8.55k   8.55k       0   8.55k
# Query size     0   9.86k      98      98      98      98       0      98
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ########################
#  10ms  ################################################################
# 100ms  ########
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'reservation_slots'\G
#    SHOW CREATE TABLE `isupipe`.`reservation_slots`\G
UPDATE reservation_slots SET slot = slot - 1 WHERE start_at >= 1700985600 AND end_at <= 1701050400\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  slot = slot - 1 from reservation_slots where  start_at >= 1700985600 AND end_at <= 1701050400\G

# Query 16: 13.39 QPS, 0.05x concurrency, ID 0xD2A0864774622BA36F6557496405CF75 at byte 179022895
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T07:57:38 to 2023-11-25T07:59:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1245
# Exec time      1      4s    61us    15ms     4ms     5ms     2ms     4ms
# Lock time      0     1ms       0    18us     1us     1us       0     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  70.17k      55      60   57.72   56.92    1.09   56.92
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #####
# 100us  ######
#   1ms  ################################################################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'themes'\G
#    SHOW CREATE TABLE `isupipe`.`themes`\G
INSERT INTO themes (user_id, dark_mode) VALUES(1228, 1)\G

# Query 17: 111.11 QPS, 0.48x concurrency, ID 0xDFFCC1D78939C4D781C7C58349101F50 at byte 569964
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T07:57:37 to 2023-11-25T07:57:46
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1000
# Exec time      1      4s     2ms     9ms     4ms     5ms   622us     4ms
# Lock time      0     1ms       0    11us     1us     1us       0     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0 401.18k     192     463  410.81  420.77   16.87  400.73
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'users'\G
#    SHOW CREATE TABLE `isupipe`.`users`\G
INSERT INTO users (id, name, display_name, description, password) VALUES (646, 'hiroshiendo0', '感慨', '普段営業をしています。\nよろしくおねがいします！\n\n連絡は以下からお願いします。\n\nウェブサイト: http://hiroshiendo.example.com/\nメールアドレス: hiroshiendo@example.com\n', '$2a$04$UwZb6IFm4tgS1pLvujdaV.sK3Gq9zN2IJyIuGjqtMyuSL/dZXfqjK')\G

# Query 18: 1.07k QPS, 0.30x concurrency, ID 0xFD38427AE3D09E3883A680F7BAF95D3A at byte 14674946
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T07:57:48 to 2023-11-25T07:58:02
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   14992
# Exec time      1      4s   262us     4ms   282us   287us    41us   273us
# Lock time      1    14ms       0    24us       0     1us       0     1us
# Rows sent      5  14.64k       1       1       1       1       0       1
# Rows examine  19  14.33M    1001    1003    1002  964.41       0  964.41
# Query size     2   1.71M     117     120  119.85  118.34    0.64  118.34
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #
#  10ms
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livestreams'\G
#    SHOW CREATE TABLE `isupipe`.`livestreams`\G
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livecomments'\G
#    SHOW CREATE TABLE `isupipe`.`livecomments`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT IFNULL(SUM(l2.tip), 0) FROM livestreams l INNER JOIN livecomments l2 ON l.id = l2.livestream_id WHERE l.id = 6056\G

# Query 19: 3.55 QPS, 0.06x concurrency, ID 0x859BBB7E9D760686137A944406874C4D at byte 108720513
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T07:58:02 to 2023-11-25T07:59:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     245
# Exec time      1      4s     2ms    61ms    17ms    34ms    10ms    15ms
# Lock time     12    92ms       0    13ms   377us   247us     2ms     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0 335.44k   1.25k   1.49k   1.37k   1.46k   73.30   1.33k
# Query size     0  20.40k      78      93   85.27   88.31    3.40   84.10
# String:
# Databases    isudns
# Hosts        localhost
# Users        isudns
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ############################
#  10ms  ################################################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isudns` LIKE 'records'\G
#    SHOW CREATE TABLE `isudns`.`records`\G
delete from records where domain_id=2 and name='yuitakahashi0.u.isucon.dev' and type='A'\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select * from  records where domain_id=2 and name='yuitakahashi0.u.isucon.dev' and type='A'\G

# Query 20: 1.28 QPS, 0.05x concurrency, ID 0x7F9C0C0BA9473953B723EE16C08655F1 at byte 56198616
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-25T07:57:48 to 2023-11-25T07:59:10
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     105
# Exec time      1      4s     5ms   114ms    39ms    87ms    27ms    36ms
# Lock time      0   122us       0    18us     1us     1us     1us     1us
# Rows sent      0     903       1      21    8.60   18.53    6.13    8.91
# Rows examine   1 898.14k   8.55k   8.55k   8.55k   8.55k       0   8.55k
# Query size     0   9.84k      96      96      96      96       0      96
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  #######################
#  10ms  ################################################################
# 100ms  ####
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'reservation_slots'\G
#    SHOW CREATE TABLE `isupipe`.`reservation_slots`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM reservation_slots WHERE start_at >= 1701000000 AND end_at <= 1701021600 FOR UPDATE\G
